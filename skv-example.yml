defaults:
  # merged into each secret unless overridden
  region: eu-central-1
  extras:
    version_stage: AWSCURRENT
secrets:
  # AWS Secrets Manager
  - alias: db_pass
    provider: aws
    name: myapp/prod/db_password
    env: DB_PASSWORD
    extras:
      region: eu-central-1
      version_stage: AWSCURRENT
      # optional: specify a profile
      profile: prod
      # optional: fetch a specific version id
      # version_id: "1234-5678"
  # AWS SSM Parameter Store
  - alias: db_host
    provider: aws-ssm
    name: /myapp/prod/db_host
    env: DB_HOST
    extras:
      region: eu-central-1
      with_decryption: "true"
      profile: prod
  # Azure App Configuration
  - alias: feature_enabled
    provider: azure-appconfig
    name: myapp:feature:enabled
    env: FEATURE_ENABLED
    extras:
      endpoint: https://myapp.azconfig.io
      label: prod
  # Azure Key Vault
  - alias: jwt_secret
    provider: azure
    name: jwt-secret
    env: JWT_SECRET
    extras:
      vault_url: https://<VAULT>.vault.azure.net
      # optional: version
      # version: "<secret-version>"
  # GCP
  - alias: api_key
    provider: gcp
    # fully-qualified name OR specify project/version in extras below
    name: projects/<PROJECT>/secrets/<SECRET>/versions/latest
    env: API_KEY
    extras:
    # alternatively:
    # project: my-gcp-project
    # version: latest
    # optional credentials file override for ADC
    # credentials_file: /path/to/sa.json
  # Vault (KV v2)
  - alias: service_password
    provider: vault
    name: kv/data/myapp/password
    env: SERVICE_PASSWORD
    extras:
      address: http://127.0.0.1:8200
      # optional: enterprise namespace
      # namespace: team-a
      # choose a specific key from JSON data
      # key: password
      # AppRole auth (optional)
      role_id: "{{ VAULT_ROLE_ID }}"
      secret_id: "{{ VAULT_SECRET_ID }}"
  # Exec
  - alias: dynamic_token
    provider: exec
    name: ./scripts/fetch_token.sh
    env: DYNAMIC_TOKEN
    extras:
      args: "--flag1 --flag2"
      trim: "true"
